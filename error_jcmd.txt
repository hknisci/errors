[gbaocp01]~$./oc_dc_java_audit.sh apply -n access-and-signature-mgmt-test --dc cust-transaction-log-data-v2 --dry-run
NAMESPACE       DEPLOYMENTCONFIG        JAVA_ENV_KEYS   TARGET_ENV_PRESENT      POD     JAVA_VERSION    JCMD_VM_FLAGS   APPLY_RESULT
access-and-signature-mgmt-test  cust-transaction-log-data-v2    JAVA_MAX_MEM_RATIO,JAVA_OPTIONS JAVA_OPTIONS    cust-transaction-log-data-v2-6-5w2k4    openjdk version "1.8.0_282" OpenJDK Runtime Environment (build 1.8.0_282-b08)  1: -XX:AdaptiveSizePolicyWeight=90 -XX:CICompilerCount=2 -XX:CompressedClassSpaceSize=201326592 -XX:+ExitOnOutOfMemoryError -XX:GCTimeRatio=4 -XX:InitialHeapSize=220200960 -XX:MaxHeapFreeRatio=20 -XX:MaxHeapSize=878706688 -XX:MaxMetaspaceSize=209715200 -XX:MaxNewSize=292552704 -XX:MinHeapDeltaBytes=524288 -XX:MinHeapFreeRatio=10 -XX:NewSize=73400320 -XX:OldSize=146800640 -XX:ParallelGCThreads=4 -XX:+UseCompressedClassPointers -XX:+UseCompressedOops -XX:+UseFastUnorderedTimeStamps -XX:+UseParallelOldGC    DRYRUN:would_apply_and_rollout
[gbaocp01]~$./oc_dc_java_audit.sh apply -n access-and-signature-mgmt-test --dc cust-transaction-log-data-v2
NAMESPACE       DEPLOYMENTCONFIG        JAVA_ENV_KEYS   TARGET_ENV_PRESENT      POD     JAVA_VERSION    JCMD_VM_FLAGS   APPLY_RESULT
access-and-signature-mgmt-test  cust-transaction-log-data-v2    JAVA_MAX_MEM_RATIO,JAVA_OPTIONS JAVA_OPTIONS    cust-transaction-log-data-v2-6-5w2k4    error: unable to upgrade connection: container not found ("cust-transaction-log-data-v2")      error: unable to upgrade connection: container not found ("cust-transaction-log-data-v2")       APPLIED+ROLLEDOUT
[gbaocp01]~$

[gbaocp01]~$cat oc_dc_java_audit.sh 
#!/usr/bin/env bash
set -u
IFS=$'\n\t'

MODE="${1:-}"
shift || true

NS_FILTER=""
DC_FILTER=""
DRY_RUN="0"
LIMIT_DCS="0"
INCLUDE_NS_REGEX=""
EXCLUDE_NS_REGEX=""
POST_CHECK="1"          # apply sonrasÃ½ poddan tekrar oku
ROLLOUT_TIMEOUT="180s"  # rollout status bekleme sÃ¼
usage() {
  cat <<'EOF'
Usage:
  oc_dc_java_audit.sh {list|apply} [options]

Options:
  --namespace, -n <ns>          Only this namespace (REQUIRED for apply)
  --dc <dc-name>               Only this DeploymentConfig name (within namespace)
  --dry-run                    Apply mode: do not oc apply / rollout; just report would-change
  --limit <N>                  Process at most N DCs per run
  --include-ns-regex <regex>   Only namespaces matching regex
  --exclude-ns-regex <regex>   Skip namespaces matching regex
  --no-post-check              Apply mode: skip post-rollout java/jcmd checks
  --rollout-timeout <dur>      Rollout status wait time (default 180s), e.g. 120s

Examples:
  ./oc_dc_java_audit.sh list
  ./oc_dc_java_audit.sh list -n fin-accnt-mngmt-lab
  ./oc_dc_java_audit.sh apply -n ges-life-product-test --dry-run --dc product-channel-v0
  ./oc_dc_java_audit.sh apply -n ges-life-product-test --dc product-channel-v0
EOF
}

if [[ "$MODE" != "list" && "$MODE" != "apply" ]]; then
  usage
  exit 2
fi

while [[ $# -gt 0 ]]; do
  case "$1" in
    --namespace|-n) NS_FILTER="${2:-}"; shift 2;;
    --dc) DC_FILTER="${2:-}"; shift 2;;
    --dry-run) DRY_RUN="1"; shift;;
    --limit) LIMIT_DCS="${2:-0}"; shift 2;;
    --include-ns-regex) INCLUDE_NS_REGEX="${2:-}"; shift 2;;
    --exclude-ns-regex) EXCLUDE_NS_REGEX="${2:-}"; shift 2;;
    --no-post-check) POST_CHECK="0"; shift;;
    --rollout-timeout) ROLLOUT_TIMEOUT="${2:-180s}"; shift 2;;
    -h|--help) usage; exit 0;;
    *) echo "Unknown argument: $1"; usage; exit 2;;
  esac
done

if [[ "$MODE" == "apply" && -z "$NS_FILTER" ]]; then
  echo "ERROR: apply mode requires --namespace <ns> for safety."
  exit 5
fi

TS="$(date +%Y%m%d_%H%M%S)"
LOG_FILE="./oc_dc_java_audit_${MODE}_${TS}.log"

log() {
  local lvl="$1"; shift
  printf "%s [%s] %s\n" "$(date -Is)" "$lvl" "$*" | tee -a "$LOG_FILE" >/dev/null
}

# run_cmd <ns> <dc> <quiet_stderr:0|1> -- <command...>
# quiet_stderr=1: stderr -> /dev/null (for jsonpath listing; avoid warnings breaking parse)
# quiet_stderr=0: capture stdout+stderr (for exec; java -version uses stderr)
run_cmd() {
  local ns="$1"; shift
  local dc="$1"; shift
  local quiet="$1"; shift
  if [[ "${1:-}" != "--" ]]; then
    log "ERR" "run_cmd usage error: missing -- delimiter"
    return 99
  fi
  shift
  local -a cmd=( "$@" )

  local pretty="" i
  for i in "${cmd[@]}"; do
    if [[ "$i" =~ [[:space:]\'] ]]; then
      pretty+="'${i//\'/\'\\\'\'}' "
    else
      pretty+="$i "
    fi
  done
  pretty="${pretty% }"
  log "CMD" "ns=${ns} dc=${dc} :: ${pretty} (quiet_stderr=${quiet})"

  local out rc
  if [[ "$quiet" == "1" ]]; then
    out="$("${cmd[@]}" 2>/dev/null)" || rc=$?
  else
    out="$("${cmd[@]}" 2>&1)" || rc=$?
  fi
  rc="${rc:-0}"

  if [[ "$rc" -ne 0 ]]; then
    log "ERR" "ns=${ns} dc=${dc} rc=${rc} :: ${out}"
    printf "%s" "$out"
    return "$rc"
  fi

  log "OUT" "ns=${ns} dc=${dc} :: $(echo "$out" | head -n 1 | tr -d '\r')"
  printf "%s" "$out"
  return 0
}

# run_apply_cmd: stdout to function output, stderr only to log (not to table)
run_apply_cmd() {
  local ns="$1"; shift
  local dc="$1"; shift
  if [[ "${1:-}" != "--" ]]; then
    log "ERR" "run_apply_cmd usage error: missing -- delimiter"
    return 99
  fi
  shift
  local -a cmd=( "$@" )

  local pretty="" i
  for i in "${cmd[@]}"; do
    if [[ "$i" =~ [[:space:]\'] ]]; then
      pretty+="'${i//\'/\'\\\'\'}' "
    else
      pretty+="$i "
    fi
  done
  pretty="${pretty% }"
  log "CMD" "ns=${ns} dc=${dc} :: ${pretty} (stdout only to caller; stderr -> log)"

  local stdout tmp_err rc
  tmp_err="$(mktemp)"
  stdout="$("${cmd[@]}" 2>"$tmp_err")" || rc=$?
  rc="${rc:-0}"

  if [[ -s "$tmp_err" ]]; then
    log "WARN" "ns=${ns} dc=${dc} stderr :: $(cat "$tmp_err" | head -n 3 | tr -d '\r')"
    # full stderr log
    while read -r line; do
      [[ -n "$line" ]] && log "STDERR" "ns=${ns} dc=${dc} :: $line"
    done < "$tmp_err"
  fi
  rm -f "$tmp_err"

  if [[ "$rc" -ne 0 ]]; then
    log "ERR" "ns=${ns} dc=${dc} rc=${rc} stdout :: ${stdout}"
    printf "%s" "$stdout"
    return "$rc"
  fi

  log "OUT" "ns=${ns} dc=${dc} stdout :: $(echo "$stdout" | head -n 1 | tr -d '\r')"
  printf "%s" "$stdout"
  return 0
}

require_oc_login() {
  command -v oc >/dev/null 2>&1 || { echo "ERROR: oc not found in PATH" >&2; exit 10; }
  local out rc
  out="$(oc whoami 2>&1)" || rc=$?
  rc="${rc:-0}"
  if [[ "$rc" -ne 0 ]]; then
    echo "ERROR: oc is not logged in. oc whoami failed: $out" >&2
    exit 3
  fi
}

sanitize_one_line() { tr '\n' ' ' | sed -E 's/[[:space:]]+/ /g; s/ $//'; }

# Extract selector from DC YAML spec.selector (key=value,key2=value2)
dc_selector_from_yaml() {
  awk '
    BEGIN{spec=0; inSel=0}
    /^spec:/ {spec=1}
    spec && /^[[:space:]]+selector:/ {inSel=1; next}
    inSel {
      if ($0 ~ /^[[:space:]]{4}[A-Za-z0-9_.-]+:[[:space:]]*[A-Za-z0-9_.-]+[[:space:]]*$/) {
        gsub(/^[[:space:]]+/, "", $0)
        split($0,a,":")
        k=a[1]; v=a[2]
        gsub(/[[:space:]]+/, "", v)
        if (k != "" && v != "") {
          if (out != "") out=out ","
          out=out k "=" v
        }
        next
      }
      if ($0 !~ /^[[:space:]]{4}/) {inSel=0}
    }
    END{print out}
  '
}

find_one_pod_for_dc() {
  local ns="$1"
  local dc="$2"
  local dc_yaml="$3"

  local pods
  pods="$(run_cmd "$ns" "$dc" 1 -- oc get pod -n "$ns" -l "deploymentconfig=$dc" \
    --field-selector=status.phase=Running \
    -o jsonpath='{range .items[*]}{.metadata.name}{"\n"}{end}' || true)"
  if [[ -n "$pods" ]]; then
    echo "$pods" | head -n 1
    return 0
  fi

  local sel
  sel="$(printf "%s" "$dc_yaml" | dc_selector_from_yaml | tr -d '\r')"
  if [[ -n "$sel" ]]; then
    pods="$(run_cmd "$ns" "$dc" 1 -- oc get pod -n "$ns" -l "$sel" \
      --field-selector=status.phase=Running \
      -o jsonpath='{range .items[*]}{.metadata.name}{"\n"}{end}' || true)"
    if [[ -n "$pods" ]]; then
      echo "$pods" | head -n 1
      return 0
    fi
  fi

  echo ""
  return 0
}

# Transform DC YAML: rename env name JAVA_OPTIONS -> JAVA_OPTS_APPEND (no duplication, value unchanged)
# Works on the env list entry lines like:
#   - name: JAVA_OPTIONS
# It ONLY changes that line, keeps the following value/valueFrom intact.
transform_java_options_to_append() {
  # stdin: YAML
  # stdout: YAML (transformed)
  sed -E 's/^([[:space:]]*-[[:space:]]name:[[:space:]]*)JAVA_OPTIONS([[:space:]]*)$/\1JAVA_OPTS_APPEND\2/'
}

# Detect whether the DC YAML has env entry "name: JAVA_OPTIONS"
has_java_options_env() {
  grep -qE '^[[:space:]]*-[[:space:]]name:[[:space:]]JAVA_OPTIONS[[:space:]]*$'
}

# Detect JAVA_* env keys present (informational)
extract_java_env_keys() {
  grep -E '^[[:space:]]*-[[:space:]]name:[[:space:]]JAVA(_[A-Z0-9_]+)?[[:space:]]*$' \
    | sed -E 's/.*name:[[:space:]]*//g' \
    | sort -u \
    | paste -sd ',' - \
    | sed -E 's/^$/-/'
}

: > "$LOG_FILE"
log "INFO" "Started mode=${MODE} log=${LOG_FILE} ns=${NS_FILTER:-} dc=${DC_FILTER:-} dry_run=${DRY_RUN} post_check=${POST_CHECK} rollout_timeout=${ROLLOUT_TIMEOUT}"
require_oc_login
log "INFO" "oc whoami=$(oc whoami 2>/dev/null)"

# TSV header
printf "%s\t%s\t%s\t%s\t%s\t%s\t%s\t%s\n" \
  "NAMESPACE" "DEPLOYMENTCONFIG" "JAVA_ENV_KEYS" "TARGET_ENV_PRESENT" "POD" "JAVA_VERSION" "JCMD_VM_FLAGS" "APPLY_RESULT"

# Namespace list (quiet stderr to avoid warnings polluting parse)
NS_LIST_RAW="$(run_cmd "-" "-" 1 -- oc get ns -o jsonpath='{range .items[*]}{.metadata.name}{"\n"}{end}' || true)"
if [[ -z "$NS_LIST_RAW" ]]; then
  log "ERR" "No namespaces returned."
  exit 4
fi

while read -r ns; do
  [[ -z "$ns" ]] && continue

  [[ -n "$NS_FILTER" && "$ns" != "$NS_FILTER" ]] && continue
  if [[ -n "$INCLUDE_NS_REGEX" ]] && ! echo "$ns" | grep -Eq "$INCLUDE_NS_REGEX"; then continue; fi
  if [[ -n "$EXCLUDE_NS_REGEX" ]] && echo "$ns" | grep -Eq "$EXCLUDE_NS_REGEX"; then continue; fi

  dc_list="$(run_cmd "$ns" "-" 1 -- oc get dc -n "$ns" -o jsonpath='{range .items[*]}{.metadata.name}{"\n"}{end}' || true)"
  [[ -z "$dc_list" ]] && continue

  dc_processed=0
  while read -r dc; do
    [[ -z "$dc" ]] && continue
    [[ -n "$DC_FILTER" && "$dc" != "$DC_FILTER" ]] && continue

    dc_processed=$((dc_processed+1))
    if [[ "$LIMIT_DCS" -gt 0 && "$dc_processed" -gt "$LIMIT_DCS" ]]; then
      log "INFO" "ns=${ns} :: reached --limit ${LIMIT_DCS}, stopping."
      break
    fi

    dc_yaml="$(run_cmd "$ns" "$dc" 1 -- oc get dc "$dc" -n "$ns" -o yaml || true)"
    if [[ -z "$dc_yaml" ]]; then
      printf "%s\t%s\t%s\t%s\t%s\t%s\t%s\t%s\n" \
        "$ns" "$dc" "ERROR:dc_yaml_unreadable" "-" "-" "-" "-" "-"
      continue
    fi

    java_keys="$(printf "%s" "$dc_yaml" | extract_java_env_keys)"
    target_present="none"
    if printf "%s" "$dc_yaml" | grep -qE '^[[:space:]]*-[[:space:]]name:[[:space:]]JAVA_OPTIONS[[:space:]]*$'; then
      target_present="JAVA_OPTIONS"
    elif printf "%s" "$dc_yaml" | grep -qE '^[[:space:]]*-[[:space:]]name:[[:space:]]JAVA_OPTS_APPEND[[:space:]]*$'; then
      target_present="JAVA_OPTS_APPEND"
    fi

    # Pre-check pod (best-effort)
    pod_name="$(find_one_pod_for_dc "$ns" "$dc" "$dc_yaml" | tr -d '\r')"
    java_ver="-"
    jcmd_flags="-"
    if [[ -n "$pod_name" ]]; then
      java_out="$(run_cmd "$ns" "$dc" 0 -- oc exec -n "$ns" "$pod_name" -- java -version || true)"
      java_ver="$(echo "$java_out" | head -n 2 | sanitize_one_line)"
      [[ -z "$java_ver" ]] && java_ver="ERROR:java_version_failed"

      jcmd_out="$(run_cmd "$ns" "$dc" 0 -- oc exec -n "$ns" "$pod_name" -- jcmd 1 VM.flags || true)"
      jcmd_flags="$(echo "$jcmd_out" | sanitize_one_line)"
      [[ -z "$jcmd_flags" ]] && jcmd_flags="ERROR:jcmd_failed_or_missing"
    else
      pod_name="-"
      java_ver="WARN:no_running_pod_found"
      jcmd_flags="WARN:no_running_pod_found"
    fi

    apply_result="-"
    if [[ "$MODE" == "apply" ]]; then
      if printf "%s" "$dc_yaml" | has_java_options_env; then
        tmp_out="$(mktemp)"
        printf "%s" "$dc_yaml" | transform_java_options_to_append > "$tmp_out"

        # sanity check: ensure JAVA_OPTIONS entry is gone and JAVA_OPTS_APPEND exists
        if grep -qE '^[[:space:]]*-[[:space:]]name:[[:space:]]JAVA_OPTIONS[[:space:]]*$' "$tmp_out"; then
          apply_result="ERROR:transform_failed_java_options_still_present"
          log "ERR" "ns=${ns} dc=${dc} :: transform failed (JAVA_OPTIONS still present)."
          rm -f "$tmp_out"
        elif ! grep -qE '^[[:space:]]*-[[:space:]]name:[[:space:]]JAVA_OPTS_APPEND[[:space:]]*$' "$tmp_out"; then
          apply_result="ERROR:transform_failed_no_java_opts_append"
          log "ERR" "ns=${ns} dc=${dc} :: transform failed (JAVA_OPTS_APPEND not found)."
          rm -f "$tmp_out"
        else
          if [[ "$DRY_RUN" == "1" ]]; then
            apply_result="DRYRUN:would_apply_and_rollout"
            log "INFO" "ns=${ns} dc=${dc} :: DRY-RUN: would oc apply + rollout latest."
            rm -f "$tmp_out"
          else
            # Apply (stdout only to apply_result; stderr goes to log so warnings don't pollute table)
            apply_out="$(run_apply_cmd "$ns" "$dc" -- oc apply -n "$ns" -f "$tmp_out" || true)"
            rm -f "$tmp_out"

            # Rollout latest (must)
            rollout_out="$(run_apply_cmd "$ns" "$dc" -- oc rollout latest -n "$ns" "dc/${dc}" || true)"

            # Wait for rollout status (best-effort)
            status_out="$(run_apply_cmd "$ns" "$dc" -- oc rollout status -n "$ns" "dc/${dc}" --timeout="${ROLLOUT_TIMEOUT}" || true)"

            # Compose apply_result
            # Keep it short for table, detailed logs already exist
            if echo "$apply_out" | grep -qiE '(configured|created|unchanged)'; then
              apply_result="APPLIED+ROLLEDOUT"
            else
              apply_result="ERROR:apply_or_rollout_failed"
            fi

            # Post-check: after rollout, re-find running pod and re-read java/jcmd
            if [[ "$POST_CHECK" == "1" ]]; then
              # Refresh DC YAML (quiet)
              dc_yaml2="$(run_cmd "$ns" "$dc" 1 -- oc get dc "$dc" -n "$ns" -o yaml || true)"
              pod2="$(find_one_pod_for_dc "$ns" "$dc" "$dc_yaml2" | tr -d '\r')"
              if [[ -n "$pod2" ]]; then
                # overwrite columns with post-check results
                pod_name="$pod2"

                java_out2="$(run_cmd "$ns" "$dc" 0 -- oc exec -n "$ns" "$pod2" -- java -version || true)"
                java_ver="$(echo "$java_out2" | head -n 2 | sanitize_one_line)"
                [[ -z "$java_ver" ]] && java_ver="ERROR:java_version_failed_post"

                jcmd_out2="$(run_cmd "$ns" "$dc" 0 -- oc exec -n "$ns" "$pod2" -- jcmd 1 VM.flags || true)"
                jcmd_flags="$(echo "$jcmd_out2" | sanitize_one_line)"
                [[ -z "$jcmd_flags" ]] && jcmd_flags="ERROR:jcmd_failed_or_missing_post"
              else
                log "WARN" "ns=${ns} dc=${dc} :: post-check couldn't find running pod after rollout."
              fi
            fi
          fi
        fi
      else
        apply_result="SKIP:no_JAVA_OPTIONS"
      fi
    fi

    printf "%s\t%s\t%s\t%s\t%s\t%s\t%s\t%s\n" \
      "$ns" "$dc" "$java_keys" "$target_present" "$pod_name" "$java_ver" "$jcmd_flags" "$apply_result"

  done <<< "$dc_list"

done <<< "$NS_LIST_RAW"

log "INFO" "Completed mode=${MODE}"
log "INFO" "Log saved to ${LOG_FILE}"
[gbaocp01]~$

[gbaocp01]~$cat oc_dc_java_audit_apply_20260220_133529.log
2026-02-20T13:35:29+03:00 [INFO] Started mode=apply log=./oc_dc_java_audit_apply_20260220_133529.log ns=access-and-signature-mgmt-test dc=cust-transaction-log-data-v2 dry_run=1 post_check=1 rollout_timeout=180s
2026-02-20T13:35:30+03:00 [INFO] oc whoami=HakanIsc
2026-02-20T13:35:30+03:00 [CMD] ns=- dc=- :: oc get ns -o 'jsonpath={range .items[*]}{.metadata.name}{"\n"}{end}' (quiet_stderr=1)
2026-02-20T13:35:32+03:00 [OUT] ns=- dc=- :: access-and-signature-mgmt-dev
2026-02-20T13:35:32+03:00 [CMD] ns=access-and-signature-mgmt-test dc=- :: oc get dc -n access-and-signature-mgmt-test -o 'jsonpath={range .items[*]}{.metadata.name}{"\n"}{end}' (quiet_stderr=1)
2026-02-20T13:35:32+03:00 [OUT] ns=access-and-signature-mgmt-test dc=- :: card-pin-business-v1
2026-02-20T13:35:32+03:00 [CMD] ns=access-and-signature-mgmt-test dc=cust-transaction-log-data-v2 :: oc get dc cust-transaction-log-data-v2 -n access-and-signature-mgmt-test -o yaml (quiet_stderr=1)
2026-02-20T13:35:32+03:00 [OUT] ns=access-and-signature-mgmt-test dc=cust-transaction-log-data-v2 :: apiVersion: apps.openshift.io/v1
2026-02-20T13:35:32+03:00 [CMD] ns=access-and-signature-mgmt-test dc=cust-transaction-log-data-v2 :: oc get pod -n access-and-signature-mgmt-test -l deploymentconfig=cust-transaction-log-data-v2 --field-selector=status.phase=Running -o 'jsonpath={range .items[*]}{.metadata.name}{"\n"}{end}' (quiet_stderr=1)
2026-02-20T13:35:32+03:00 [OUT] ns=access-and-signature-mgmt-test dc=cust-transaction-log-data-v2 :: cust-transaction-log-data-v2-6-5w2k4
2026-02-20T13:35:32+03:00 [CMD] ns=access-and-signature-mgmt-test dc=cust-transaction-log-data-v2 :: oc exec -n access-and-signature-mgmt-test cust-transaction-log-data-v2-6-5w2k4 -- java -version (quiet_stderr=0)
2026-02-20T13:35:33+03:00 [OUT] ns=access-and-signature-mgmt-test dc=cust-transaction-log-data-v2 :: openjdk version "1.8.0_282"
2026-02-20T13:35:33+03:00 [CMD] ns=access-and-signature-mgmt-test dc=cust-transaction-log-data-v2 :: oc exec -n access-and-signature-mgmt-test cust-transaction-log-data-v2-6-5w2k4 -- jcmd 1 VM.flags (quiet_stderr=0)
2026-02-20T13:35:34+03:00 [OUT] ns=access-and-signature-mgmt-test dc=cust-transaction-log-data-v2 :: 1:
2026-02-20T13:35:34+03:00 [INFO] ns=access-and-signature-mgmt-test dc=cust-transaction-log-data-v2 :: DRY-RUN: would oc apply + rollout latest.
2026-02-20T13:35:34+03:00 [INFO] Completed mode=apply
2026-02-20T13:35:34+03:00 [INFO] Log saved to ./oc_dc_java_audit_apply_20260220_133529.log
[gbaocp01]~$cat oc_dc_java_audit_apply_20260220_133550.log 
2026-02-20T13:35:50+03:00 [INFO] Started mode=apply log=./oc_dc_java_audit_apply_20260220_133550.log ns=access-and-signature-mgmt-test dc=cust-transaction-log-data-v2 dry_run=0 post_check=1 rollout_timeout=180s
2026-02-20T13:35:51+03:00 [INFO] oc whoami=HakanIsc
2026-02-20T13:35:51+03:00 [CMD] ns=- dc=- :: oc get ns -o 'jsonpath={range .items[*]}{.metadata.name}{"\n"}{end}' (quiet_stderr=1)
2026-02-20T13:35:52+03:00 [OUT] ns=- dc=- :: access-and-signature-mgmt-dev
2026-02-20T13:35:52+03:00 [CMD] ns=access-and-signature-mgmt-test dc=- :: oc get dc -n access-and-signature-mgmt-test -o 'jsonpath={range .items[*]}{.metadata.name}{"\n"}{end}' (quiet_stderr=1)
2026-02-20T13:35:52+03:00 [OUT] ns=access-and-signature-mgmt-test dc=- :: card-pin-business-v1
2026-02-20T13:35:52+03:00 [CMD] ns=access-and-signature-mgmt-test dc=cust-transaction-log-data-v2 :: oc get dc cust-transaction-log-data-v2 -n access-and-signature-mgmt-test -o yaml (quiet_stderr=1)
2026-02-20T13:35:52+03:00 [OUT] ns=access-and-signature-mgmt-test dc=cust-transaction-log-data-v2 :: apiVersion: apps.openshift.io/v1
2026-02-20T13:35:52+03:00 [CMD] ns=access-and-signature-mgmt-test dc=cust-transaction-log-data-v2 :: oc get pod -n access-and-signature-mgmt-test -l deploymentconfig=cust-transaction-log-data-v2 --field-selector=status.phase=Running -o 'jsonpath={range .items[*]}{.metadata.name}{"\n"}{end}' (quiet_stderr=1)
2026-02-20T13:35:52+03:00 [OUT] ns=access-and-signature-mgmt-test dc=cust-transaction-log-data-v2 :: cust-transaction-log-data-v2-6-5w2k4
2026-02-20T13:35:52+03:00 [CMD] ns=access-and-signature-mgmt-test dc=cust-transaction-log-data-v2 :: oc exec -n access-and-signature-mgmt-test cust-transaction-log-data-v2-6-5w2k4 -- java -version (quiet_stderr=0)
2026-02-20T13:35:53+03:00 [OUT] ns=access-and-signature-mgmt-test dc=cust-transaction-log-data-v2 :: openjdk version "1.8.0_282"
2026-02-20T13:35:53+03:00 [CMD] ns=access-and-signature-mgmt-test dc=cust-transaction-log-data-v2 :: oc exec -n access-and-signature-mgmt-test cust-transaction-log-data-v2-6-5w2k4 -- jcmd 1 VM.flags (quiet_stderr=0)
2026-02-20T13:35:54+03:00 [OUT] ns=access-and-signature-mgmt-test dc=cust-transaction-log-data-v2 :: 1:
2026-02-20T13:35:54+03:00 [CMD] ns=access-and-signature-mgmt-test dc=cust-transaction-log-data-v2 :: oc apply -n access-and-signature-mgmt-test -f /tmp/tmp.8NT9spweMA (stdout only to caller; stderr -> log)
2026-02-20T13:35:54+03:00 [WARN] ns=access-and-signature-mgmt-test dc=cust-transaction-log-data-v2 stderr :: W0220 13:35:54.879374   23919 warnings.go:70] apps.openshift.io/v1 DeploymentConfig is deprecated in v4.14+, unavailable in v4.10000+
Warning: resource deploymentconfigs/cust-transaction-log-data-v2 is missing the kubectl.kubernetes.io/last-applied-configuration annotation which is required by oc apply. oc apply should only be used on resources created declaratively by either oc create --save-config or oc apply. The missing annotation will be patched automatically.
W0220 13:35:54.905894   23919 warnings.go:70] apps.openshift.io/v1 DeploymentConfig is deprecated in v4.14+, unavailable in v4.10000+
2026-02-20T13:35:54+03:00 [STDERR] ns=access-and-signature-mgmt-test dc=cust-transaction-log-data-v2 :: W0220 13:35:54.879374   23919 warnings.go:70] apps.openshift.io/v1 DeploymentConfig is deprecated in v4.14+, unavailable in v4.10000+
2026-02-20T13:35:54+03:00 [STDERR] ns=access-and-signature-mgmt-test dc=cust-transaction-log-data-v2 :: Warning: resource deploymentconfigs/cust-transaction-log-data-v2 is missing the kubectl.kubernetes.io/last-applied-configuration annotation which is required by oc apply. oc apply should only be used on resources created declaratively by either oc create --save-config or oc apply. The missing annotation will be patched automatically.
2026-02-20T13:35:54+03:00 [STDERR] ns=access-and-signature-mgmt-test dc=cust-transaction-log-data-v2 :: W0220 13:35:54.905894   23919 warnings.go:70] apps.openshift.io/v1 DeploymentConfig is deprecated in v4.14+, unavailable in v4.10000+
2026-02-20T13:35:54+03:00 [OUT] ns=access-and-signature-mgmt-test dc=cust-transaction-log-data-v2 stdout :: deploymentconfig.apps.openshift.io/cust-transaction-log-data-v2 configured
2026-02-20T13:35:54+03:00 [CMD] ns=access-and-signature-mgmt-test dc=cust-transaction-log-data-v2 :: oc rollout latest -n access-and-signature-mgmt-test dc/cust-transaction-log-data-v2 (stdout only to caller; stderr -> log)
2026-02-20T13:35:55+03:00 [WARN] ns=access-and-signature-mgmt-test dc=cust-transaction-log-data-v2 stderr :: W0220 13:35:55.129993   23993 warnings.go:70] apps.openshift.io/v1 DeploymentConfig is deprecated in v4.14+, unavailable in v4.10000+
W0220 13:35:55.161190   23993 warnings.go:70] apps.openshift.io/v1 DeploymentRequest is deprecated in v4.14+, unavailable in v4.10000+
2026-02-20T13:35:55+03:00 [STDERR] ns=access-and-signature-mgmt-test dc=cust-transaction-log-data-v2 :: W0220 13:35:55.129993   23993 warnings.go:70] apps.openshift.io/v1 DeploymentConfig is deprecated in v4.14+, unavailable in v4.10000+
2026-02-20T13:35:55+03:00 [STDERR] ns=access-and-signature-mgmt-test dc=cust-transaction-log-data-v2 :: W0220 13:35:55.161190   23993 warnings.go:70] apps.openshift.io/v1 DeploymentRequest is deprecated in v4.14+, unavailable in v4.10000+
2026-02-20T13:35:55+03:00 [OUT] ns=access-and-signature-mgmt-test dc=cust-transaction-log-data-v2 stdout :: deploymentconfig.apps.openshift.io/cust-transaction-log-data-v2 rolled out
2026-02-20T13:35:55+03:00 [CMD] ns=access-and-signature-mgmt-test dc=cust-transaction-log-data-v2 :: oc rollout status -n access-and-signature-mgmt-test dc/cust-transaction-log-data-v2 --timeout=180s (stdout only to caller; stderr -> log)
2026-02-20T13:36:57+03:00 [WARN] ns=access-and-signature-mgmt-test dc=cust-transaction-log-data-v2 stderr :: W0220 13:35:55.365799   24061 warnings.go:70] apps.openshift.io/v1 DeploymentConfig is deprecated in v4.14+, unavailable in v4.10000+
W0220 13:35:55.378184   24061 warnings.go:70] apps.openshift.io/v1 DeploymentConfig is deprecated in v4.14+, unavailable in v4.10000+
W0220 13:35:55.383870   24061 warnings.go:70] apps.openshift.io/v1 DeploymentConfig is deprecated in v4.14+, unavailable in v4.10000+
2026-02-20T13:36:57+03:00 [STDERR] ns=access-and-signature-mgmt-test dc=cust-transaction-log-data-v2 :: W0220 13:35:55.365799   24061 warnings.go:70] apps.openshift.io/v1 DeploymentConfig is deprecated in v4.14+, unavailable in v4.10000+
2026-02-20T13:36:57+03:00 [STDERR] ns=access-and-signature-mgmt-test dc=cust-transaction-log-data-v2 :: W0220 13:35:55.378184   24061 warnings.go:70] apps.openshift.io/v1 DeploymentConfig is deprecated in v4.14+, unavailable in v4.10000+
2026-02-20T13:36:57+03:00 [STDERR] ns=access-and-signature-mgmt-test dc=cust-transaction-log-data-v2 :: W0220 13:35:55.383870   24061 warnings.go:70] apps.openshift.io/v1 DeploymentConfig is deprecated in v4.14+, unavailable in v4.10000+
2026-02-20T13:36:57+03:00 [OUT] ns=access-and-signature-mgmt-test dc=cust-transaction-log-data-v2 stdout :: Waiting for rollout to finish: 0 out of 1 new replicas have been updated...
2026-02-20T13:36:57+03:00 [CMD] ns=access-and-signature-mgmt-test dc=cust-transaction-log-data-v2 :: oc get dc cust-transaction-log-data-v2 -n access-and-signature-mgmt-test -o yaml (quiet_stderr=1)
2026-02-20T13:36:57+03:00 [OUT] ns=access-and-signature-mgmt-test dc=cust-transaction-log-data-v2 :: apiVersion: apps.openshift.io/v1
2026-02-20T13:36:57+03:00 [CMD] ns=access-and-signature-mgmt-test dc=cust-transaction-log-data-v2 :: oc get pod -n access-and-signature-mgmt-test -l deploymentconfig=cust-transaction-log-data-v2 --field-selector=status.phase=Running -o 'jsonpath={range .items[*]}{.metadata.name}{"\n"}{end}' (quiet_stderr=1)
2026-02-20T13:36:57+03:00 [OUT] ns=access-and-signature-mgmt-test dc=cust-transaction-log-data-v2 :: cust-transaction-log-data-v2-6-5w2k4
2026-02-20T13:36:57+03:00 [CMD] ns=access-and-signature-mgmt-test dc=cust-transaction-log-data-v2 :: oc exec -n access-and-signature-mgmt-test cust-transaction-log-data-v2-6-5w2k4 -- java -version (quiet_stderr=0)
2026-02-20T13:36:58+03:00 [ERR] ns=access-and-signature-mgmt-test dc=cust-transaction-log-data-v2 rc=1 :: error: unable to upgrade connection: container not found ("cust-transaction-log-data-v2")
2026-02-20T13:36:58+03:00 [CMD] ns=access-and-signature-mgmt-test dc=cust-transaction-log-data-v2 :: oc exec -n access-and-signature-mgmt-test cust-transaction-log-data-v2-6-5w2k4 -- jcmd 1 VM.flags (quiet_stderr=0)
2026-02-20T13:36:58+03:00 [ERR] ns=access-and-signature-mgmt-test dc=cust-transaction-log-data-v2 rc=1 :: error: unable to upgrade connection: container not found ("cust-transaction-log-data-v2")
2026-02-20T13:36:58+03:00 [INFO] Completed mode=apply
2026-02-20T13:36:58+03:00 [INFO] Log saved to ./oc_dc_java_audit_apply_20260220_133550.log
[gbaocp01]~$

script sonrası yaml:
kind: DeploymentConfig
apiVersion: apps.openshift.io/v1
metadata:
  annotations:
    kubectl.kubernetes.io/last-applied-configuration: |
      {"apiVersion":"apps.openshift.io/v1","kind":"DeploymentConfig","metadata":{"annotations":{"openshift.io/backup-registry-hostname":"image-registry.openshift-image-registry.svc:5000","openshift.io/backup-server-version":"1.23","openshift.io/restore-registry-hostname":"image-registry.openshift-image-registry.svc:5000","openshift.io/restore-server-version":"1.23"},"creationTimestamp":"2023-04-13T11:08:25Z","generation":19,"labels":{"app":"cust-transaction-log-data-v2","env":"test","migration.openshift.io/migrated-by-migmigration":"c4ba853f-7de8-478c-ba83-48e7ab78524c","migration.openshift.io/migrated-by-migplan":"2b260e39-8f4f-4464-89b8-672af6fff8a2","velero.io/backup-name":"migration-3e834-initial-mkfjb","velero.io/restore-name":"migration-3e834-final-78cft","version":"2.2.0-beta.1-21-test"},"managedFields":[{"apiVersion":"apps.openshift.io/v1","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:annotations":{".":{},"f:openshift.io/backup-registry-hostname":{},"f:openshift.io/backup-server-version":{},"f:openshift.io/restore-registry-hostname":{},"f:openshift.io/restore-server-version":{}},"f:labels":{".":{},"f:app":{},"f:env":{},"f:migration.openshift.io/migrated-by-migmigration":{},"f:migration.openshift.io/migrated-by-migplan":{},"f:velero.io/backup-name":{},"f:velero.io/restore-name":{},"f:version":{}}},"f:spec":{"f:replicas":{},"f:revisionHistoryLimit":{},"f:selector":{".":{},"f:app":{},"f:deploymentconfig":{}},"f:strategy":{"f:activeDeadlineSeconds":{},"f:rollingParams":{".":{},"f:intervalSeconds":{},"f:maxSurge":{},"f:maxUnavailable":{},"f:timeoutSeconds":{},"f:updatePeriodSeconds":{}},"f:type":{}},"f:template":{".":{},"f:metadata":{".":{},"f:annotations":{".":{},"f:sidecar.istio.io/inject":{}},"f:creationTimestamp":{},"f:labels":{".":{},"f:app":{},"f:availabilityZone":{},"f:companyCode":{},"f:deploymentconfig":{},"f:env":{},"f:region":{},"f:version":{}}},"f:spec":{".":{},"f:containers":{".":{},"k:{\"name\":\"cust-transaction-log-data-v2\"}":{".":{},"f:env":{".":{},"k:{\"name\":\"APP_CONFIG_BRANCH\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"APP_CONFIG_PATH\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:configMapKeyRef":{}}},"k:{\"name\":\"APP_CONFIG_REPO\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"CLUSTER_REGION\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"CONFIG_SERVER_HOST\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"CONFIG_SERVER_PORT\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"CONJUR_ACCOUNT\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:configMapKeyRef":{}}},"k:{\"name\":\"CONJUR_APPLIANCE_URL\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:configMapKeyRef":{}}},"k:{\"name\":\"CONJUR_AUTHN_TOKEN_FILE\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:configMapKeyRef":{}}},"k:{\"name\":\"CONJUR_SSL_CERTIFICATE\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:configMapKeyRef":{}}},"k:{\"name\":\"ENV\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"GC_MAX_HEAP_FREE_RATIO\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"GC_MAX_METASPACE_SIZE\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"JAVA_MAX_MEM_RATIO\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"JAVA_OPTIONS\"}":{".":{},"f:name":{}},"k:{\"name\":\"OPENSHIFT_APP_NAME\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"OPENSHIFT_DEPLOY_NAMESPACE\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"PROJECT_NAME\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"TZ\"}":{".":{},"f:name":{},"f:value":{}}},"f:image":{},"f:imagePullPolicy":{},"f:lifecycle":{".":{},"f:preStop":{".":{},"f:exec":{}}},"f:livenessProbe":{".":{},"f:failureThreshold":{},"f:periodSeconds":{},"f:successThreshold":{},"f:timeoutSeconds":{}},"f:name":{},"f:ports":{".":{},"k:{\"containerPort\":6565,\"protocol\":\"TCP\"}":{".":{},"f:containerPort":{},"f:protocol":{}},"k:{\"containerPort\":8080,\"protocol\":\"TCP\"}":{".":{},"f:containerPort":{},"f:protocol":{}}},"f:readinessProbe":{".":{},"f:failureThreshold":{},"f:periodSeconds":{},"f:successThreshold":{},"f:timeoutSeconds":{}},"f:resources":{".":{},"f:limits":{".":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:startupProbe":{".":{},"f:failureThreshold":{},"f:initialDelaySeconds":{},"f:periodSeconds":{},"f:successThreshold":{},"f:timeoutSeconds":{}},"f:terminationMessagePath":{},"f:terminationMessagePolicy":{},"f:volumeMounts":{".":{},"k:{\"mountPath\":\"/etc/appconf\"}":{".":{},"f:mountPath":{},"f:name":{}},"k:{\"mountPath\":\"/etc/public-key-certs\"}":{".":{},"f:mountPath":{},"f:name":{}},"k:{\"mountPath\":\"/run/conjur\"}":{".":{},"f:mountPath":{},"f:name":{},"f:readOnly":{}}}}},"f:dnsConfig":{".":{},"f:options":{}},"f:dnsPolicy":{},"f:initContainers":{".":{},"k:{\"name\":\"conjur-authenticator\"}":{".":{},"f:env":{".":{},"k:{\"name\":\"CONJUR_ACCOUNT\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:configMapKeyRef":{}}},"k:{\"name\":\"CONJUR_APPLIANCE_URL\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:configMapKeyRef":{}}},"k:{\"name\":\"CONJUR_AUTHN_LOGIN\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:configMapKeyRef":{}}},"k:{\"name\":\"CONJUR_AUTHN_LOGIN_CLUSTER\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:configMapKeyRef":{}}},"k:{\"name\":\"CONJUR_AUTHN_URL\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:configMapKeyRef":{}}},"k:{\"name\":\"CONJUR_SSL_CERTIFICATE\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:configMapKeyRef":{}}},"k:{\"name\":\"CONTAINER_MODE\"}":{".":{},"f:name":{},"f:value":{}},"k:{\"name\":\"MY_POD_IP\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:fieldRef":{}}},"k:{\"name\":\"MY_POD_NAME\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:fieldRef":{}}},"k:{\"name\":\"MY_POD_NAMESPACE\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:fieldRef":{}}}},"f:image":{},"f:imagePullPolicy":{},"f:name":{},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:terminationMessagePath":{},"f:terminationMessagePolicy":{},"f:volumeMounts":{".":{},"k:{\"mountPath\":\"/run/conjur\"}":{".":{},"f:mountPath":{},"f:name":{}}}}},"f:restartPolicy":{},"f:schedulerName":{},"f:securityContext":{},"f:terminationGracePeriodSeconds":{},"f:volumes":{".":{},"k:{\"name\":\"conjur-access-token\"}":{".":{},"f:emptyDir":{".":{},"f:medium":{}},"f:name":{}},"k:{\"name\":\"cust-transaction-log-data-v2-j-app-config-95\"}":{".":{},"f:configMap":{".":{},"f:defaultMode":{},"f:name":{}},"f:name":{}},"k:{\"name\":\"cust-transaction-log-data-v2-j-certstore-uj\"}":{".":{},"f:name":{},"f:secret":{".":{},"f:defaultMode":{},"f:secretName":{}}}}}},"f:triggers":{}}},"manager":"velero-server","operation":"Update","time":"2023-04-13T11:08:25Z"},{"apiVersion":"apps.openshift.io/v1","fieldsType":"FieldsV1","fieldsV1":{"f:spec":{"f:template":{"f:spec":{"f:containers":{"k:{\"name\":\"cust-transaction-log-data-v2\"}":{"f:livenessProbe":{"f:tcpSocket":{".":{},"f:port":{}}},"f:readinessProbe":{"f:tcpSocket":{".":{},"f:port":{}}},"f:startupProbe":{"f:tcpSocket":{".":{},"f:port":{}}}}}}}}},"manager":"oc","operation":"Update","time":"2023-04-24T11:24:29Z"},{"apiVersion":"apps.openshift.io/v1","fieldsType":"FieldsV1","fieldsV1":{"f:spec":{"f:template":{"f:spec":{"f:containers":{"k:{\"name\":\"cust-transaction-log-data-v2\"}":{"f:env":{"k:{\"name\":\"JAVA_OPTIONS\"}":{"f:value":{}}},"f:lifecycle":{"f:preStop":{"f:exec":{"f:command":{}}}},"f:resources":{"f:limits":{"f:cpu":{}}}}}}}}},"manager":"kubectl-patch","operation":"Update","time":"2025-10-10T12:49:24Z"},{"apiVersion":"apps.openshift.io/v1","fieldsType":"FieldsV1","fieldsV1":{"f:status":{"f:availableReplicas":{},"f:conditions":{".":{},"k:{\"type\":\"Available\"}":{".":{},"f:lastTransitionTime":{},"f:lastUpdateTime":{},"f:message":{},"f:status":{},"f:type":{}},"k:{\"type\":\"Progressing\"}":{".":{},"f:lastTransitionTime":{},"f:lastUpdateTime":{},"f:message":{},"f:reason":{},"f:status":{},"f:type":{}}},"f:observedGeneration":{},"f:readyReplicas":{},"f:replicas":{},"f:unavailableReplicas":{},"f:updatedReplicas":{}}},"manager":"openshift-controller-manager","operation":"Update","subresource":"status","time":"2026-02-12T17:07:18Z"}],"name":"cust-transaction-log-data-v2","namespace":"access-and-signature-mgmt-test","resourceVersion":"5358165741","uid":"4beeb980-1f5b-4197-84d8-549677c16290"},"spec":{"replicas":1,"revisionHistoryLimit":3,"selector":{"app":"cust-transaction-log-data-v2","deploymentconfig":"cust-transaction-log-data-v2"},"strategy":{"activeDeadlineSeconds":21600,"resources":{},"rollingParams":{"intervalSeconds":1,"maxSurge":1,"maxUnavailable":"50%","timeoutSeconds":600,"updatePeriodSeconds":1},"type":"Rolling"},"template":{"metadata":{"annotations":{"sidecar.istio.io/inject":"false"},"creationTimestamp":null,"labels":{"app":"cust-transaction-log-data-v2","availabilityZone":"istanbul-1","companyCode":"ORT","deploymentconfig":"cust-transaction-log-data-v2","env":"test","region":"istanbul","version":"2.2.0-beta.1-21-test"}},"spec":{"containers":[{"env":[{"name":"ENV","value":"test"},{"name":"CONFIG_SERVER_HOST","value":"config-server.backend-architecture-test.svc"},{"name":"CONFIG_SERVER_PORT","value":"8080"},{"name":"APP_CONFIG_REPO","value":"ORT_ACCESS-AND-SIGNATURE-MGMT/CUSTOMER-TRANSACTION-LOG-DATA.CONFIG"},{"name":"APP_CONFIG_BRANCH","value":"c61cf4bbf250c88042257de2619aae2fa86a5694"},{"name":"JAVA_OPTS_APPEND","value":"-Djavax.net.ssl.trustStorePassword=changeit -Dlog4j2.contextSelector=org.apache.logging.log4j.core.async.AsyncLoggerContextSelector -Dlog4j2.formatMsgNoLookups=true -Djavax.net.ssl.trustStore=/etc/public-key-certs/cacerts -Djava.net.preferIPv4Stack=true"},{"name":"JAVA_MAX_MEM_RATIO","value":"70"},{"name":"GC_MAX_METASPACE_SIZE","value":"200"},{"name":"GC_MAX_HEAP_FREE_RATIO","value":"20"},{"name":"TZ","value":"Europe/Istanbul"},{"name":"PROJECT_NAME","value":"access-and-signature-mgmt"},{"name":"OPENSHIFT_DEPLOY_NAMESPACE","value":"access-and-signature-mgmt-test"},{"name":"OPENSHIFT_APP_NAME","value":"cust-transaction-log-data-v2"},{"name":"CLUSTER_REGION","value":"istanbul"},{"name":"CONJUR_APPLIANCE_URL","valueFrom":{"configMapKeyRef":{"key":"CONJUR_APPLIANCE_URL","name":"conjur-config"}}},{"name":"CONJUR_ACCOUNT","valueFrom":{"configMapKeyRef":{"key":"CONJUR_ACCOUNT","name":"conjur-config"}}},{"name":"CONJUR_AUTHN_TOKEN_FILE","valueFrom":{"configMapKeyRef":{"key":"CONJUR_AUTHN_TOKEN_FILE","name":"conjur-config"}}},{"name":"CONJUR_SSL_CERTIFICATE","valueFrom":{"configMapKeyRef":{"key":"CONJUR_SSL_CERTIFICATE","name":"conjur-config"}}},{"name":"APP_CONFIG_PATH","valueFrom":{"configMapKeyRef":{"key":"app-config-path","name":"cust-transaction-log-data-v2-j-app-config-95"}}}],"image":"gtrepo.fw.garanti.com.tr/docker-local/access-and-signature-mgmt-test/cust-transaction-log-data-v2:2.2.0-beta.1-21-test","imagePullPolicy":"Always","lifecycle":{"preStop":{"exec":{"command":["/bin/sh","-c","sleep 3; \nexport APISERVER=https://kubernetes.default.svc; \nexport SERVICEACCOUNT=/var/run/secrets/kubernetes.io/serviceaccount; \nexport NAMESPACE=$(cat ${SERVICEACCOUNT}/namespace); \nexport TOKEN=eyJhbGciOiJSUzI1NiIsImtpZCI6Ill0LWxZcURJbWg3UFE3R1haNlVSZUdQekN4MW43R0lIb05qRjFvZVA4NkkifQ.eyJpc3MiOiJrdWJlcm5ldGVzL3NlcnZpY2VhY2NvdW50Iiwia3ViZXJuZXRlcy5pby9zZXJ2aWNlYWNjb3VudC9uYW1lc3BhY2UiOiJkZWZhdWx0Iiwia3ViZXJuZXRlcy5pby9zZXJ2aWNlYWNjb3VudC9zZWNyZXQubmFtZSI6ImNvbmp1ci1zYS10b2tlbi14YzJiNSIsImt1YmVybmV0ZXMuaW8vc2VydmljZWFjY291bnQvc2VydmljZS1hY2NvdW50Lm5hbWUiOiJjb25qdXItc2EiLCJrdWJlcm5ldGVzLmlvL3NlcnZpY2VhY2NvdW50L3NlcnZpY2UtYWNjb3VudC51aWQiOiJkZGU4NmE1My00YzYzLTQ3Y2QtYThlZC1iZDA5NWFkNjM3ODgiLCJzdWIiOiJzeXN0ZW06c2VydmljZWFjY291bnQ6ZGVmYXVsdDpjb25qdXItc2EifQ.3U55TR-hyFGsh4W5Sz6dkMQAsTpfM4-1fXTyuB8Un1QGTMy-iJp1Xd81Oh6ILTtlMt9BgrLQPiuh_Y2sMcruZuo0UwVaPEE7CnHF_AlG4LGE-8xuQMI6EcizE_JbQn3KKrhY7bm0VlhHB121jODHDAzmBPkKc008eC5WfQ01W_XayViJpzhcBZ76YBf_1ZWhES1Kv6CNcDA94uqupvR0CK6sEGTKiXqzuZ8Ivg7iuB6an4oord7yrVPFxVigzBCE0Qa-0BC4pdpWWLzAYplLM7sYBHP9t5JcDxbmKGTFGlLqzTreGVnz915nV0efL4O5xr99yMJa1R3Amhyqj_GqRO-LzfdQ_gDbX9w2NlVRF9fJJiHd5cBQYt5xWhwev73Emulwfw9b6UStxApsWNl7ir8b_ls3eu10o2xYoRiV39EhOBhLG1pHBnzbYNvQpohGb2awCjWC9gUk6u-r7SPtJVI4GIj9YeA0VGx6XO-Bcy0NxPi2G_R7_HsElKAMm7XbtH08sH6IaLoLZiUEPhHUm9D78tYQaK8-9Mtyw_F-z-igWF7mMVmFosGe2SoKeRUJ4XuKTyUr8rHgUgU0QpgNpzOuvaV5GlyqgI3Hf4Se0n84gU_ioH8Kr8Lg2ajGd4xIZb_ztopM2hnG_HZzyvH9r5pbSa9GoztYlevwTB5kzOA;\nexport CACERT=${SERVICEACCOUNT}/ca.crt; \nexport POD=$(printenv HOSTNAME); \ncurl -X DELETE --cacert ${CACERT} --header \"Authorization: Bearer ${TOKEN}\" ${APISERVER}/api/v1/namespaces/$NAMESPACE/pods/$POD;\n"]}}},"livenessProbe":{"failureThreshold":5,"periodSeconds":10,"successThreshold":1,"tcpSocket":{"port":6565},"timeoutSeconds":4},"name":"cust-transaction-log-data-v2","ports":[{"containerPort":8080,"protocol":"TCP"},{"containerPort":6565,"protocol":"TCP"}],"readinessProbe":{"failureThreshold":3,"periodSeconds":10,"successThreshold":1,"tcpSocket":{"port":6565},"timeoutSeconds":4},"resources":{"limits":{"cpu":"4","memory":"1256M"},"requests":{"cpu":"200m","memory":"1024M"}},"startupProbe":{"failureThreshold":74,"initialDelaySeconds":35,"periodSeconds":6,"successThreshold":1,"tcpSocket":{"port":6565},"timeoutSeconds":4},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","volumeMounts":[{"mountPath":"/run/conjur","name":"conjur-access-token","readOnly":true},{"mountPath":"/etc/appconf","name":"cust-transaction-log-data-v2-j-app-config-95"},{"mountPath":"/etc/public-key-certs","name":"cust-transaction-log-data-v2-j-certstore-uj"}]}],"dnsConfig":{"options":[{"name":"single-request"}]},"dnsPolicy":"ClusterFirst","initContainers":[{"env":[{"name":"CONTAINER_MODE","value":"init"},{"name":"MY_POD_NAME","valueFrom":{"fieldRef":{"apiVersion":"v1","fieldPath":"metadata.name"}}},{"name":"MY_POD_NAMESPACE","valueFrom":{"fieldRef":{"apiVersion":"v1","fieldPath":"metadata.namespace"}}},{"name":"MY_POD_IP","valueFrom":{"fieldRef":{"apiVersion":"v1","fieldPath":"status.podIP"}}},{"name":"CONJUR_APPLIANCE_URL","valueFrom":{"configMapKeyRef":{"key":"CONJUR_APPLIANCE_URL","name":"conjur-config"}}},{"name":"CONJUR_AUTHN_URL","valueFrom":{"configMapKeyRef":{"key":"CONJUR_AUTHN_URL","name":"conjur-config"}}},{"name":"CONJUR_ACCOUNT","valueFrom":{"configMapKeyRef":{"key":"CONJUR_ACCOUNT","name":"conjur-config"}}},{"name":"CONJUR_SSL_CERTIFICATE","valueFrom":{"configMapKeyRef":{"key":"CONJUR_SSL_CERTIFICATE","name":"conjur-config"}}},{"name":"CONJUR_AUTHN_LOGIN_CLUSTER","valueFrom":{"configMapKeyRef":{"key":"CONJUR_AUTHN_LOGIN_CLUSTER","name":"conjur-config"}}},{"name":"CONJUR_AUTHN_LOGIN","valueFrom":{"configMapKeyRef":{"key":"conjur-authn-login-sidecar","name":"cust-transaction-log-data-v2-j-conjur-config-h2"}}}],"image":"gtrepo.fw.garanti.com.tr/docker-local/openshift/conjur-authn-k8s-client","imagePullPolicy":"Always","name":"conjur-authenticator","resources":{"limits":{"cpu":"100m","memory":"32M"},"requests":{"cpu":"50m","memory":"16M"}},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","volumeMounts":[{"mountPath":"/run/conjur","name":"conjur-access-token"}]}],"restartPolicy":"Always","schedulerName":"default-scheduler","securityContext":{},"terminationGracePeriodSeconds":30,"volumes":[{"emptyDir":{"medium":"Memory"},"name":"conjur-access-token"},{"configMap":{"defaultMode":420,"name":"cust-transaction-log-data-v2-j-app-config-95"},"name":"cust-transaction-log-data-v2-j-app-config-95"},{"name":"cust-transaction-log-data-v2-j-certstore-uj","secret":{"defaultMode":420,"secretName":"cust-transaction-log-data-v2-j-certstore-uj"}}]}},"test":false,"triggers":[]},"status":{"availableReplicas":1,"conditions":[{"lastTransitionTime":"2025-10-10T12:50:18Z","lastUpdateTime":"2025-10-10T12:50:23Z","message":"replication controller \"cust-transaction-log-data-v2-6\" successfully rolled out","reason":"NewReplicationControllerAvailable","status":"True","type":"Progressing"},{"lastTransitionTime":"2026-02-12T17:07:18Z","lastUpdateTime":"2026-02-12T17:07:18Z","message":"Deployment config has minimum availability.","status":"True","type":"Available"}],"details":{"causes":[{"type":"Manual"}],"message":"manual change"},"latestVersion":6,"observedGeneration":19,"readyReplicas":1,"replicas":1,"unavailableReplicas":0,"updatedReplicas":1}}
    openshift.io/backup-registry-hostname: 'image-registry.openshift-image-registry.svc:5000'
    openshift.io/backup-server-version: '1.23'
    openshift.io/restore-registry-hostname: 'image-registry.openshift-image-registry.svc:5000'
    openshift.io/restore-server-version: '1.23'
  resourceVersion: '5399648724'
  name: cust-transaction-log-data-v2
  uid: 4beeb980-1f5b-4197-84d8-549677c16290
  creationTimestamp: '2023-04-13T11:08:25Z'
  generation: 21
  managedFields:
    - manager: velero-server
      operation: Update
      apiVersion: apps.openshift.io/v1
      time: '2023-04-13T11:08:25Z'
      fieldsType: FieldsV1
      fieldsV1:
        'f:metadata':
          'f:annotations':
            .: {}
            'f:openshift.io/backup-registry-hostname': {}
            'f:openshift.io/backup-server-version': {}
            'f:openshift.io/restore-registry-hostname': {}
            'f:openshift.io/restore-server-version': {}
          'f:labels':
            .: {}
            'f:app': {}
            'f:env': {}
            'f:migration.openshift.io/migrated-by-migmigration': {}
            'f:migration.openshift.io/migrated-by-migplan': {}
            'f:velero.io/backup-name': {}
            'f:velero.io/restore-name': {}
            'f:version': {}
        'f:spec':
          'f:replicas': {}
          'f:revisionHistoryLimit': {}
          'f:selector':
            .: {}
            'f:app': {}
            'f:deploymentconfig': {}
          'f:strategy':
            'f:activeDeadlineSeconds': {}
            'f:rollingParams':
              .: {}
              'f:intervalSeconds': {}
              'f:maxSurge': {}
              'f:maxUnavailable': {}
              'f:timeoutSeconds': {}
              'f:updatePeriodSeconds': {}
            'f:type': {}
          'f:template':
            .: {}
            'f:metadata':
              .: {}
              'f:annotations':
                .: {}
                'f:sidecar.istio.io/inject': {}
              'f:creationTimestamp': {}
              'f:labels':
                .: {}
                'f:app': {}
                'f:availabilityZone': {}
                'f:companyCode': {}
                'f:deploymentconfig': {}
                'f:env': {}
                'f:region': {}
                'f:version': {}
            'f:spec':
              'f:volumes':
                .: {}
                'k:{"name":"conjur-access-token"}':
                  .: {}
                  'f:emptyDir':
                    .: {}
                    'f:medium': {}
                  'f:name': {}
                'k:{"name":"cust-transaction-log-data-v2-j-app-config-95"}':
                  .: {}
                  'f:configMap':
                    .: {}
                    'f:defaultMode': {}
                    'f:name': {}
                  'f:name': {}
                'k:{"name":"cust-transaction-log-data-v2-j-certstore-uj"}':
                  .: {}
                  'f:name': {}
                  'f:secret':
                    .: {}
                    'f:defaultMode': {}
                    'f:secretName': {}
              'f:containers':
                .: {}
                'k:{"name":"cust-transaction-log-data-v2"}':
                  'f:image': {}
                  'f:startupProbe':
                    .: {}
                    'f:failureThreshold': {}
                    'f:initialDelaySeconds': {}
                    'f:periodSeconds': {}
                    'f:successThreshold': {}
                    'f:timeoutSeconds': {}
                  'f:volumeMounts':
                    .: {}
                    'k:{"mountPath":"/etc/appconf"}':
                      .: {}
                      'f:mountPath': {}
                      'f:name': {}
                    'k:{"mountPath":"/etc/public-key-certs"}':
                      .: {}
                      'f:mountPath': {}
                      'f:name': {}
                    'k:{"mountPath":"/run/conjur"}':
                      .: {}
                      'f:mountPath': {}
                      'f:name': {}
                      'f:readOnly': {}
                  'f:terminationMessagePolicy': {}
                  .: {}
                  'f:resources':
                    .: {}
                    'f:limits':
                      .: {}
                      'f:memory': {}
                    'f:requests':
                      .: {}
                      'f:cpu': {}
                      'f:memory': {}
                  'f:lifecycle':
                    .: {}
                    'f:preStop':
                      .: {}
                      'f:exec': {}
                  'f:livenessProbe':
                    .: {}
                    'f:failureThreshold': {}
                    'f:periodSeconds': {}
                    'f:successThreshold': {}
                    'f:timeoutSeconds': {}
                  'f:env':
                    'k:{"name":"APP_CONFIG_REPO"}':
                      .: {}
                      'f:name': {}
                      'f:value': {}
                    'k:{"name":"CONFIG_SERVER_PORT"}':
                      .: {}
                      'f:name': {}
                      'f:value': {}
                    'k:{"name":"JAVA_OPTIONS"}':
                      .: {}
                      'f:name': {}
                    'k:{"name":"CONJUR_APPLIANCE_URL"}':
                      .: {}
                      'f:name': {}
                      'f:valueFrom':
                        .: {}
                        'f:configMapKeyRef': {}
                    'k:{"name":"CONJUR_AUTHN_TOKEN_FILE"}':
                      .: {}
                      'f:name': {}
                      'f:valueFrom':
                        .: {}
                        'f:configMapKeyRef': {}
                    'k:{"name":"TZ"}':
                      .: {}
                      'f:name': {}
                      'f:value': {}
                    'k:{"name":"CONFIG_SERVER_HOST"}':
                      .: {}
                      'f:name': {}
                      'f:value': {}
                    'k:{"name":"JAVA_MAX_MEM_RATIO"}':
                      .: {}
                      'f:name': {}
                      'f:value': {}
                    .: {}
                    'k:{"name":"CONJUR_SSL_CERTIFICATE"}':
                      .: {}
                      'f:name': {}
                      'f:valueFrom':
                        .: {}
                        'f:configMapKeyRef': {}
                    'k:{"name":"OPENSHIFT_DEPLOY_NAMESPACE"}':
                      .: {}
                      'f:name': {}
                      'f:value': {}
                    'k:{"name":"GC_MAX_METASPACE_SIZE"}':
                      .: {}
                      'f:name': {}
                      'f:value': {}
                    'k:{"name":"GC_MAX_HEAP_FREE_RATIO"}':
                      .: {}
                      'f:name': {}
                      'f:value': {}
                    'k:{"name":"APP_CONFIG_BRANCH"}':
                      .: {}
                      'f:name': {}
                      'f:value': {}
                    'k:{"name":"OPENSHIFT_APP_NAME"}':
                      .: {}
                      'f:name': {}
                      'f:value': {}
                    'k:{"name":"PROJECT_NAME"}':
                      .: {}
                      'f:name': {}
                      'f:value': {}
                    'k:{"name":"APP_CONFIG_PATH"}':
                      .: {}
                      'f:name': {}
                      'f:valueFrom':
                        .: {}
                        'f:configMapKeyRef': {}
                    'k:{"name":"CONJUR_ACCOUNT"}':
                      .: {}
                      'f:name': {}
                      'f:valueFrom':
                        .: {}
                        'f:configMapKeyRef': {}
                    'k:{"name":"CLUSTER_REGION"}':
                      .: {}
                      'f:name': {}
                      'f:value': {}
                    'k:{"name":"ENV"}':
                      .: {}
                      'f:name': {}
                      'f:value': {}
                  'f:readinessProbe':
                    .: {}
                    'f:failureThreshold': {}
                    'f:periodSeconds': {}
                    'f:successThreshold': {}
                    'f:timeoutSeconds': {}
                  'f:terminationMessagePath': {}
                  'f:imagePullPolicy': {}
                  'f:ports':
                    .: {}
                    'k:{"containerPort":6565,"protocol":"TCP"}':
                      .: {}
                      'f:containerPort': {}
                      'f:protocol': {}
                    'k:{"containerPort":8080,"protocol":"TCP"}':
                      .: {}
                      'f:containerPort': {}
                      'f:protocol': {}
                  'f:name': {}
              'f:dnsPolicy': {}
              'f:restartPolicy': {}
              .: {}
              'f:schedulerName': {}
              'f:terminationGracePeriodSeconds': {}
              'f:initContainers':
                .: {}
                'k:{"name":"conjur-authenticator"}':
                  'f:image': {}
                  'f:volumeMounts':
                    .: {}
                    'k:{"mountPath":"/run/conjur"}':
                      .: {}
                      'f:mountPath': {}
                      'f:name': {}
                  'f:terminationMessagePolicy': {}
                  .: {}
                  'f:resources':
                    .: {}
                    'f:limits':
                      .: {}
                      'f:cpu': {}
                      'f:memory': {}
                    'f:requests':
                      .: {}
                      'f:cpu': {}
                      'f:memory': {}
                  'f:env':
                    'k:{"name":"CONJUR_AUTHN_URL"}':
                      .: {}
                      'f:name': {}
                      'f:valueFrom':
                        .: {}
                        'f:configMapKeyRef': {}
                    'k:{"name":"CONTAINER_MODE"}':
                      .: {}
                      'f:name': {}
                      'f:value': {}
                    'k:{"name":"MY_POD_IP"}':
                      .: {}
                      'f:name': {}
                      'f:valueFrom':
                        .: {}
                        'f:fieldRef': {}
                    'k:{"name":"CONJUR_APPLIANCE_URL"}':
                      .: {}
                      'f:name': {}
                      'f:valueFrom':
                        .: {}
                        'f:configMapKeyRef': {}
                    'k:{"name":"MY_POD_NAME"}':
                      .: {}
                      'f:name': {}
                      'f:valueFrom':
                        .: {}
                        'f:fieldRef': {}
                    .: {}
                    'k:{"name":"CONJUR_SSL_CERTIFICATE"}':
                      .: {}
                      'f:name': {}
                      'f:valueFrom':
                        .: {}
                        'f:configMapKeyRef': {}
                    'k:{"name":"MY_POD_NAMESPACE"}':
                      .: {}
                      'f:name': {}
                      'f:valueFrom':
                        .: {}
                        'f:fieldRef': {}
                    'k:{"name":"CONJUR_AUTHN_LOGIN_CLUSTER"}':
                      .: {}
                      'f:name': {}
                      'f:valueFrom':
                        .: {}
                        'f:configMapKeyRef': {}
                    'k:{"name":"CONJUR_ACCOUNT"}':
                      .: {}
                      'f:name': {}
                      'f:valueFrom':
                        .: {}
                        'f:configMapKeyRef': {}
                    'k:{"name":"CONJUR_AUTHN_LOGIN"}':
                      .: {}
                      'f:name': {}
                      'f:valueFrom':
                        .: {}
                        'f:configMapKeyRef': {}
                  'f:terminationMessagePath': {}
                  'f:imagePullPolicy': {}
                  'f:name': {}
              'f:dnsConfig':
                .: {}
                'f:options': {}
              'f:securityContext': {}
          'f:triggers': {}
    - manager: oc
      operation: Update
      apiVersion: apps.openshift.io/v1
      time: '2023-04-24T11:24:29Z'
      fieldsType: FieldsV1
      fieldsV1:
        'f:spec':
          'f:template':
            'f:spec':
              'f:containers':
                'k:{"name":"cust-transaction-log-data-v2"}':
                  'f:livenessProbe':
                    'f:tcpSocket':
                      .: {}
                      'f:port': {}
                  'f:readinessProbe':
                    'f:tcpSocket':
                      .: {}
                      'f:port': {}
                  'f:startupProbe':
                    'f:tcpSocket':
                      .: {}
                      'f:port': {}
    - manager: kubectl-patch
      operation: Update
      apiVersion: apps.openshift.io/v1
      time: '2025-10-10T12:49:24Z'
      fieldsType: FieldsV1
      fieldsV1:
        'f:spec':
          'f:template':
            'f:spec':
              'f:containers':
                'k:{"name":"cust-transaction-log-data-v2"}':
                  'f:env':
                    'k:{"name":"JAVA_OPTIONS"}':
                      'f:value': {}
                  'f:lifecycle':
                    'f:preStop':
                      'f:exec':
                        'f:command': {}
                  'f:resources':
                    'f:limits':
                      'f:cpu': {}
    - manager: kubectl-client-side-apply
      operation: Update
      apiVersion: apps.openshift.io/v1
      time: '2026-02-20T10:35:54Z'
      fieldsType: FieldsV1
      fieldsV1:
        'f:metadata':
          'f:annotations':
            'f:kubectl.kubernetes.io/last-applied-configuration': {}
        'f:spec':
          'f:template':
            'f:spec':
              'f:containers':
                'k:{"name":"cust-transaction-log-data-v2"}':
                  'f:env':
                    'k:{"name":"JAVA_OPTS_APPEND"}':
                      .: {}
                      'f:name': {}
                      'f:value': {}
    - manager: openshift-controller-manager
      operation: Update
      apiVersion: apps.openshift.io/v1
      time: '2026-02-20T10:36:57Z'
      fieldsType: FieldsV1
      fieldsV1:
        'f:status':
          'f:availableReplicas': {}
          'f:conditions':
            .: {}
            'k:{"type":"Available"}':
              .: {}
              'f:lastTransitionTime': {}
              'f:lastUpdateTime': {}
              'f:message': {}
              'f:status': {}
              'f:type': {}
            'k:{"type":"Progressing"}':
              .: {}
              'f:lastTransitionTime': {}
              'f:lastUpdateTime': {}
              'f:message': {}
              'f:reason': {}
              'f:status': {}
              'f:type': {}
          'f:observedGeneration': {}
          'f:readyReplicas': {}
          'f:replicas': {}
          'f:unavailableReplicas': {}
          'f:updatedReplicas': {}
      subresource: status
  namespace: access-and-signature-mgmt-test
  labels:
    app: cust-transaction-log-data-v2
    env: test
    migration.openshift.io/migrated-by-migmigration: c4ba853f-7de8-478c-ba83-48e7ab78524c
    migration.openshift.io/migrated-by-migplan: 2b260e39-8f4f-4464-89b8-672af6fff8a2
    velero.io/backup-name: migration-3e834-initial-mkfjb
    velero.io/restore-name: migration-3e834-final-78cft
    version: 2.2.0-beta.1-21-test
spec:
  strategy:
    type: Rolling
    rollingParams:
      updatePeriodSeconds: 1
      intervalSeconds: 1
      timeoutSeconds: 600
      maxUnavailable: 50%
      maxSurge: 1
    resources: {}
    activeDeadlineSeconds: 21600
  triggers: []
  replicas: 1
  revisionHistoryLimit: 3
  test: false
  selector:
    app: cust-transaction-log-data-v2
    deploymentconfig: cust-transaction-log-data-v2
  template:
    metadata:
      creationTimestamp: null
      labels:
        app: cust-transaction-log-data-v2
        availabilityZone: istanbul-1
        companyCode: ORT
        deploymentconfig: cust-transaction-log-data-v2
        env: test
        region: istanbul
        version: 2.2.0-beta.1-21-test
      annotations:
        sidecar.istio.io/inject: 'false'
    spec:
      restartPolicy: Always
      initContainers:
        - name: conjur-authenticator
          image: gtrepo.fw.garanti.com.tr/docker-local/openshift/conjur-authn-k8s-client
          env:
            - name: CONTAINER_MODE
              value: init
            - name: MY_POD_NAME
              valueFrom:
                fieldRef:
                  apiVersion: v1
                  fieldPath: metadata.name
            - name: MY_POD_NAMESPACE
              valueFrom:
                fieldRef:
                  apiVersion: v1
                  fieldPath: metadata.namespace
            - name: MY_POD_IP
              valueFrom:
                fieldRef:
                  apiVersion: v1
                  fieldPath: status.podIP
            - name: CONJUR_APPLIANCE_URL
              valueFrom:
                configMapKeyRef:
                  name: conjur-config
                  key: CONJUR_APPLIANCE_URL
            - name: CONJUR_AUTHN_URL
              valueFrom:
                configMapKeyRef:
                  name: conjur-config
                  key: CONJUR_AUTHN_URL
            - name: CONJUR_ACCOUNT
              valueFrom:
                configMapKeyRef:
                  name: conjur-config
                  key: CONJUR_ACCOUNT
            - name: CONJUR_SSL_CERTIFICATE
              valueFrom:
                configMapKeyRef:
                  name: conjur-config
                  key: CONJUR_SSL_CERTIFICATE
            - name: CONJUR_AUTHN_LOGIN_CLUSTER
              valueFrom:
                configMapKeyRef:
                  name: conjur-config
                  key: CONJUR_AUTHN_LOGIN_CLUSTER
            - name: CONJUR_AUTHN_LOGIN
              valueFrom:
                configMapKeyRef:
                  name: cust-transaction-log-data-v2-j-conjur-config-h2
                  key: conjur-authn-login-sidecar
          resources:
            limits:
              cpu: 100m
              memory: 32M
            requests:
              cpu: 50m
              memory: 16M
          volumeMounts:
            - name: conjur-access-token
              mountPath: /run/conjur
          terminationMessagePath: /dev/termination-log
          terminationMessagePolicy: File
          imagePullPolicy: Always
      schedulerName: default-scheduler
      terminationGracePeriodSeconds: 30
      dnsConfig:
        options:
          - name: single-request
      securityContext: {}
      containers:
        - resources:
            limits:
              cpu: '4'
              memory: 1256M
            requests:
              cpu: 200m
              memory: 1024M
          readinessProbe:
            tcpSocket:
              port: 6565
            timeoutSeconds: 4
            periodSeconds: 10
            successThreshold: 1
            failureThreshold: 3
          terminationMessagePath: /dev/termination-log
          lifecycle:
            preStop:
              exec:
                command:
                  - /bin/sh
                  - '-c'
                  - |
                    sleep 3; 
                    export APISERVER=https://kubernetes.default.svc; 
                    export SERVICEACCOUNT=/var/run/secrets/kubernetes.io/serviceaccount; 
                    export NAMESPACE=$(cat ${SERVICEACCOUNT}/namespace); 
                    export TOKEN=eyJhbGciOiJSUzI1NiIsImtpZCI6Ill0LWxZcURJbWg3UFE3R1haNlVSZUdQekN4MW43R0lIb05qRjFvZVA4NkkifQ.eyJpc3MiOiJrdWJlcm5ldGVzL3NlcnZpY2VhY2NvdW50Iiwia3ViZXJuZXRlcy5pby9zZXJ2aWNlYWNjb3VudC9uYW1lc3BhY2UiOiJkZWZhdWx0Iiwia3ViZXJuZXRlcy5pby9zZXJ2aWNlYWNjb3VudC9zZWNyZXQubmFtZSI6ImNvbmp1ci1zYS10b2tlbi14YzJiNSIsImt1YmVybmV0ZXMuaW8vc2VydmljZWFjY291bnQvc2VydmljZS1hY2NvdW50Lm5hbWUiOiJjb25qdXItc2EiLCJrdWJlcm5ldGVzLmlvL3NlcnZpY2VhY2NvdW50L3NlcnZpY2UtYWNjb3VudC51aWQiOiJkZGU4NmE1My00YzYzLTQ3Y2QtYThlZC1iZDA5NWFkNjM3ODgiLCJzdWIiOiJzeXN0ZW06c2VydmljZWFjY291bnQ6ZGVmYXVsdDpjb25qdXItc2EifQ.3U55TR-hyFGsh4W5Sz6dkMQAsTpfM4-1fXTyuB8Un1QGTMy-iJp1Xd81Oh6ILTtlMt9BgrLQPiuh_Y2sMcruZuo0UwVaPEE7CnHF_AlG4LGE-8xuQMI6EcizE_JbQn3KKrhY7bm0VlhHB121jODHDAzmBPkKc008eC5WfQ01W_XayViJpzhcBZ76YBf_1ZWhES1Kv6CNcDA94uqupvR0CK6sEGTKiXqzuZ8Ivg7iuB6an4oord7yrVPFxVigzBCE0Qa-0BC4pdpWWLzAYplLM7sYBHP9t5JcDxbmKGTFGlLqzTreGVnz915nV0efL4O5xr99yMJa1R3Amhyqj_GqRO-LzfdQ_gDbX9w2NlVRF9fJJiHd5cBQYt5xWhwev73Emulwfw9b6UStxApsWNl7ir8b_ls3eu10o2xYoRiV39EhOBhLG1pHBnzbYNvQpohGb2awCjWC9gUk6u-r7SPtJVI4GIj9YeA0VGx6XO-Bcy0NxPi2G_R7_HsElKAMm7XbtH08sH6IaLoLZiUEPhHUm9D78tYQaK8-9Mtyw_F-z-igWF7mMVmFosGe2SoKeRUJ4XuKTyUr8rHgUgU0QpgNpzOuvaV5GlyqgI3Hf4Se0n84gU_ioH8Kr8Lg2ajGd4xIZb_ztopM2hnG_HZzyvH9r5pbSa9GoztYlevwTB5kzOA;
                    export CACERT=${SERVICEACCOUNT}/ca.crt; 
                    export POD=$(printenv HOSTNAME); 
                    curl -X DELETE --cacert ${CACERT} --header "Authorization: Bearer ${TOKEN}" ${APISERVER}/api/v1/namespaces/$NAMESPACE/pods/$POD;
          name: cust-transaction-log-data-v2
          livenessProbe:
            tcpSocket:
              port: 6565
            timeoutSeconds: 4
            periodSeconds: 10
            successThreshold: 1
            failureThreshold: 5
          env:
            - name: ENV
              value: test
            - name: CONFIG_SERVER_HOST
              value: config-server.backend-architecture-test.svc
            - name: CONFIG_SERVER_PORT
              value: '8080'
            - name: APP_CONFIG_REPO
              value: ORT_ACCESS-AND-SIGNATURE-MGMT/CUSTOMER-TRANSACTION-LOG-DATA.CONFIG
            - name: APP_CONFIG_BRANCH
              value: c61cf4bbf250c88042257de2619aae2fa86a5694
            - name: JAVA_OPTS_APPEND
              value: '-Djavax.net.ssl.trustStorePassword=changeit -Dlog4j2.contextSelector=org.apache.logging.log4j.core.async.AsyncLoggerContextSelector -Dlog4j2.formatMsgNoLookups=true -Djavax.net.ssl.trustStore=/etc/public-key-certs/cacerts -Djava.net.preferIPv4Stack=true'
            - name: JAVA_OPTIONS
              value: '-Djavax.net.ssl.trustStorePassword=changeit -Dlog4j2.contextSelector=org.apache.logging.log4j.core.async.AsyncLoggerContextSelector -Dlog4j2.formatMsgNoLookups=true -Djavax.net.ssl.trustStore=/etc/public-key-certs/cacerts -Djava.net.preferIPv4Stack=true'
            - name: JAVA_MAX_MEM_RATIO
              value: '70'
            - name: GC_MAX_METASPACE_SIZE
              value: '200'
            - name: GC_MAX_HEAP_FREE_RATIO
              value: '20'
            - name: TZ
              value: Europe/Istanbul
            - name: PROJECT_NAME
              value: access-and-signature-mgmt
            - name: OPENSHIFT_DEPLOY_NAMESPACE
              value: access-and-signature-mgmt-test
            - name: OPENSHIFT_APP_NAME
              value: cust-transaction-log-data-v2
            - name: CLUSTER_REGION
              value: istanbul
            - name: CONJUR_APPLIANCE_URL
              valueFrom:
                configMapKeyRef:
                  name: conjur-config
                  key: CONJUR_APPLIANCE_URL
            - name: CONJUR_ACCOUNT
              valueFrom:
                configMapKeyRef:
                  name: conjur-config
                  key: CONJUR_ACCOUNT
            - name: CONJUR_AUTHN_TOKEN_FILE
              valueFrom:
                configMapKeyRef:
                  name: conjur-config
                  key: CONJUR_AUTHN_TOKEN_FILE
            - name: CONJUR_SSL_CERTIFICATE
              valueFrom:
                configMapKeyRef:
                  name: conjur-config
                  key: CONJUR_SSL_CERTIFICATE
            - name: APP_CONFIG_PATH
              valueFrom:
                configMapKeyRef:
                  name: cust-transaction-log-data-v2-j-app-config-95
                  key: app-config-path
          ports:
            - containerPort: 8080
              protocol: TCP
            - containerPort: 6565
              protocol: TCP
          imagePullPolicy: Always
          startupProbe:
            tcpSocket:
              port: 6565
            initialDelaySeconds: 35
            timeoutSeconds: 4
            periodSeconds: 6
            successThreshold: 1
            failureThreshold: 74
          volumeMounts:
            - name: conjur-access-token
              readOnly: true
              mountPath: /run/conjur
            - name: cust-transaction-log-data-v2-j-app-config-95
              mountPath: /etc/appconf
            - name: cust-transaction-log-data-v2-j-certstore-uj
              mountPath: /etc/public-key-certs
          terminationMessagePolicy: File
          image: 'gtrepo.fw.garanti.com.tr/docker-local/access-and-signature-mgmt-test/cust-transaction-log-data-v2:2.2.0-beta.1-21-test'
      volumes:
        - name: conjur-access-token
          emptyDir:
            medium: Memory
        - name: cust-transaction-log-data-v2-j-app-config-95
          configMap:
            name: cust-transaction-log-data-v2-j-app-config-95
            defaultMode: 420
        - name: cust-transaction-log-data-v2-j-certstore-uj
          secret:
            secretName: cust-transaction-log-data-v2-j-certstore-uj
            defaultMode: 420
      dnsPolicy: ClusterFirst
status:
  observedGeneration: 21
  details:
    message: manual change
    causes:
      - type: Manual
  availableReplicas: 1
  unavailableReplicas: 0
  latestVersion: 7
  updatedReplicas: 1
  conditions:
    - type: Available
      status: 'True'
      lastUpdateTime: '2026-02-12T17:07:18Z'
      lastTransitionTime: '2026-02-12T17:07:18Z'
      message: Deployment config has minimum availability.
    - type: Progressing
      status: 'True'
      lastUpdateTime: '2026-02-20T10:36:57Z'
      lastTransitionTime: '2026-02-20T10:36:53Z'
      reason: NewReplicationControllerAvailable
      message: replication controller "cust-transaction-log-data-v2-7" successfully rolled out
  replicas: 1
  readyReplicas: 1
